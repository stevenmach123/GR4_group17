<!DOCTYPE html>
<html>
<head>
<style>
  h1{
        font-family:'Times New Roman', Times, serif;
        font-size: 35px;
       }
  h1 ins{
    font-style:italic;
    font-weight:300;
    text-decoration-line: none;
  }
  section.title{
      padding:0px 20px;
      line-height: 0.3;
      border : 1px solid orange;
  }
  section{
      margin-bottom:30px;     
  }


  .menu1:hover{
      background-color: pink;
  }
  .menu2:hover{
      background-color: pink;
  }
  .lo1 li:hover{
    background-color: pink;
  }
  .left_box{
    border:1px solid orange;
    
  }
  .right_box{
    border:1px solid orange;
  }
  .lo1{
      display :block;
      padding: 0px 4px 0px 20px;
  }  
    .left_box{
         width: 20%;
         margin-right:40px;
         height:auto;

      }

    .right_box{
        width: 100%;
        height:600px;
        height:auto;
        float:left;
       
        
    }
    .main_right{
      width: 80%;
      flex-direction: row;
    }
    
  

  .center_box{ 
        border: 1px solid orange;
        display : flex;
        align-items: flex-start;
        justify-content: space-between;
       
    }
    .info{ 
      display: none;
    }
    .info2{
      display:none;
    }
    .info3{
      display:none;
    }
    .info4{
      display:none;
    }
    .info .pp1{
      font-size:20px;
    }
    
    .info3 li{
      margin-bottom: 10px;
      font-size:17px;
    }
    .right_box p{
      padding:0px 10px 0px 10px;
      font-size:17px;
    }

  img[class = i1]{
    height:500px;
    width:700px;
    
    
  }
  
  
  img[class = i2]{
    height:200px;
    width:360px;
    padding:10px 0px 0px 20px; 
    border: 1px solid black;
    
  }
  .i3 {
    border:1px solid black;
  }
  .im1{
    display:flex;
    justify-content: space-evenly;
    
  }
  .margin1{
      margin-top:20px;
   }
  
  
</style>
</head>
<section class="title" class="b">
  <h1><ins>CS424</ins> WORK PAGE</h1>
  <p>KHANG MACH</p>
  <p>CLASS: SPRING 2021</p>
</section>
  <div class="center_box">
  <div class="left_box">
     
    <div id ="pm1" > 
        <li class= "menu1" > Description of Project1</li>
        <div class="lo1" id="lo1d">
            <li onclick = "t1()">How project task work</li>
            <li onclick = "t2()">How processing data</li>
            <li onclick = "t3()">Interesting fact from visualization</li>
            <li onclick = "t4()">Video</li>
        </div>
    </div >
    <div >
        <li class ="menu2"> Link to Project1</li> 
         <div class= "lo1" id="lo2d"> 
         <li><a href="https://github.com/stevenmach123/cs424/tree/main/Documents/SP2021/CS424/project1_cs424"> To Github </a> </li>
         <li><a href="https://kmach6cs424.shinyapps.io/work1_KM/"> To shiny visualization</a></li>
       </div> 
   </div>   
   
   <div> 
      <li class= "menu1 margin1"> Description of Project2</li>
        <div class="lo1" id="lo1d">
        <li onclick = "t2_1()">How project task work</li>
        <li onclick = "t2_2()">How processing data</li>
        <li onclick = "t2_3()">Interesting fact from visualization</li>
        <li onclick = "t2_4()">Video</li>

        </div>
        <li class ="menu2"> Link to Project2</li> 
        <div class= "lo1" id="lo2d"> 
        <li><a href="https://github.com/stevenmach123/cs424/tree/main/Documents/SP2021/CS424/work3"> To Github </a> </li>
        <li><a href="https://kmach6cs424.shinyapps.io/work3/"> To shiny visualization</a></li>
      </div> 

    </div>
    
  </div>

  <div class="main_right">
   <div class="right_box" id ="rbox1" >
     <div class="info">
      <p>The project  focus on 3 tasks of using visualization on  evaluate 9 energy sources and MegaWat for each 52 state or entire US from 1990 to 2019</p> 
      <p class="pp1">First task:<p>
      <p>First task, we want a general visualization on amount/ percent  each  source change of entire US across 1990- 2019 by display on line chart, or proportion each energy relative to other of a specific year displayed on multiple stacks bar  or  Raw table display to specify what amount/ percent(relative to other energy of single year) of 9 sources at once across year.  
      </p>
      <p> On my display task 1.1 tab give focus on percent and amount stack chart. Task 1.2 tab give display of amount and percent for line charts and raw table; We can select new one of 9 sources for line chart on side bar item "Resource" and  select "mode for Raw Table" to change display of raw table to be display amount or percent for 9 sources across years </p>
      <p class="pp1">Second task:</p>
      <div class = "im1"><img  src ="image/pc5.png" class="i1"></div> 
      <div class = "im1"><img  src ="image/pc1.png" class="i1"></div>
       <p>Comparing how 9 sources MegaWatt varies with respect to different states and years. So select task 2 tab on dashboard you will see 2 bar chart  each display 9 sources for its own state and year selected by either on "select State (Bar1) Task2" or "select Year (Bar1) Task2" for 1st chart, similar with select State and Year (Bar2) Task 2 for 2nd chart. By the default I let 2 chart display All on "Resource Bar1" and "Resource bar2", so select different years to compare for a state on 2 chart or select different  states to compare for a year on 2 chart will give  dynamic change for 9 source bars for  that state in specific year. </p>
       
       <p> Select "Resource Bar" to be one of 9 source will give a single bar. We might found that is not helpful as if we select All to see at once for all sources to compare across.That is why we have Scale Option on top left to allow you switch between Overall Scale(based on  max of specific source on any state in any year you could possibly found)  and Base Scale</p>
       <div class = "im1"><img  src ="image/pc2.png" class="i1"></div>
       <p>Base Scale  activate only one of 2 chart with “Resource Bar” select input is 1 of 9 source(!=All). This mode 
        Allow to compress new max limit  of y axis for both bar, which could be either found on 1st chart or 2nd chart. This mean if 1st chart(during display 1 of 9 sources) is higher than 2nd chart, then its bar got maximum high with new max limit, and 2nd chart bars height(no matter in Resource bar input is All or 1 of 9) will stretch up to proportional to new assigned limit of 1st chart. </p>
        <div class = "im1"><img  src ="image/pc3.png" class="i1"></div>
        <div class = "im1"><img src ="image/pc4.png"class="i1"></div>
        <p>Or one example if 2nd chart( displaying All sources) found a higher source, then that new max limit assigned for 2 chart, this make a highest source bar got max height and bar adjacents( same chart) to stretch up proportional to new max limit, and 1st chart(must be single bar) to stretch up to new assigned limit as well. Scale limit is still worked if both chart with Resource Bar input is 1 of 9 sources. </p>
        <p>However, despite you select Scale Option with Overall or Base  if 2 chart select input of Resource Bar is both All, then the Scale mode is still Overall, until you change 1 chart Resource Bar input is 1 of 9 source. </p>
        <p class ="pp1">Third task</class>
          <p>Task 3 tab, we will generate us map displaying 52 states. The top map,  states got darken or lightening depend on how a lot or little MegaWat generated for particular source in particular year. And below map focus on proportion of  that source to total source in a specific state. Meaning a state have some source are used more/less in particular year. So, you can use "select Year Task3" to change years and "select Source Task3" to change one of 9 sources(also include US Total)   
 
          </p>
      
     </div>
    
      <div class= "info2">
          <p>The original data from https://www.eia.gov/electricity/data/state/ ,the data is made as csv annual_generate_state.csv (which you can access my GitHub for see it). The data has column name is STATE,YEAR,TYPE OF PRODUCER,ENERGY SOURCE, MEGAWATT.</p>
          <div class="im1">
            <img src=image/pic2.2.png class="i2" > 
            <img src=image/pic2.1.png style="width:380px;height:110px" class="i3" > 
           </div>
           <p>First, I rename column names to be convient ,like state, year, type, source, Wat. Second, the dataset got miss identifier which I have to remove before generate visualization. To know what state is missing and how values of that showed differently than rest of other row,  I need sort dataframe in either descend/ascent order by state to reach the outliner easily. I realized it got a blank space. So, when I generate subset ulitiliti, I have stating that, state != " " & Wat > -1 & source != "Other" & source !="Other Gases" &  source != "Other Biomass" & source != "Pumped Storage". This ultiliti only permit  9 common source and  handle Wat is positive.</p>
           <div class="im1">
             <img src=image/pic2.3.png  style="width:380px;height:110px" class="i3" > 
             <img src=image/pic2.4.png  style="width:380px;height:110px" class="i3" > 
          </div> 
          <p>Third, some source got long name like "Hydroelectric Conventional", "Solar Thermal and Photovoltaic", "Natural Gas" need to have simple word name.  Fourth, when do unique(ultiliti), I realize one US-Total(not upper case) and US-TOTAL(upper case), so I need do upper case in situation  we need US-TOTAL entire data. And finally, I need convert number of Wat column to be integer, because integer/numeric  allow ggplot or geom_bar to filtering by statistic/count. I do this by gsub(",","",ultiliti$Wat) to remove comma, then do as.numeric(ultiliti$Wat). </p>
          <div class="im1"><img src=image/pic2.5.png  style="width:420px;height:250px" class="i3" >  </div>
          <p>In addition to task2, we need select input as name of state (not abbreviation), the way I do is setNames(state.key,state.name) [simiar like as.factor], this got unique list of state abbreviations on left and list of ordered state name on the right. So,  setNames(state.key,state.name)[input$state], this will search for selected state input in state.key if see the match in particular position(3rd index), then output is 3rd index of state.name.</p>
          <div class="im1"><img src=image/pic2.6.png  style="width:300px;height:250px" class="i3" >  
            <img src=image/pic2.7.png  style="width:550px;height:150px" class="i3" >  
          </div> 
          <p>addition to task3, there some state do not have full of 9 sources in particular year, as I realized when do  sum for 9 sources within for each of 52 state(within specific year). So, when got subset of a source and year, before map to usmap I just add extra dataframe with rbind to some state do not exist with sum of that source is 0. </p>
      </div>
      <div class= "info3">
          <li>On task1, Overall US We can found Coal percent   is a little depleted across year, meanwhile  amount Coal still increases from 3.8e+09 to 4.0e+09 from 2000 to 2007.  But the amount of Coal seem decrease dramatically after 2008, which make sense if match to Coal percent. </li>
          <li>On task1, Nuclear amount overall seem increase over years, got its strong jump 1998 at 1.3e+09 and reach peak at 2010 with 1.6e+09, however, percent Nuclear is just flat across year. Indicate, total amount of very year forward increase as well without look on stack bar. </li>
          <li> Wind and Wood is not common source to generate MegaWatt</li>
          <li>On task3, Around 1990-2005, Texas  got highest  Coal  Watt amount, and several  second highest are Indiana, Ohio, Penn. Seem like Texas have other higher source candidate (because Texas percent of Coal colored not really dark on map ), so back to task2, Texas have Gas is highest. Meanwhile  Indiana, Ohio, Penn are nominated by Coal Watt generator.</li>
          <li>Below 2000s,  Gas is only strong on Texas and California, but got more on Florida 2006, New York  2010, but become more prominence( see on percent map) over time on NorthWest and some states on NorthSouth </li>
          <li>Almost every year, Illinois and NewYork has highest  nuclear generator amount. But on NorthEast nuclear is prominence,  state  eg. South/North Carolina, New Jersey, Virginia use nuclear as main source generator </li>
          <li>Hydro is pretty strong on some NorthWest,like Oregon,Washing, Idaho (obvious to think, because near coast). Second rank may be New York, California. But around 2008, California start to not really depend on Hydro. </li>
      </div>
      <div class= "info4">
        <iframe width="700" height="600" src="https://www.youtube.com/embed/NZ4ET79bZiM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
       

   </div>

   <div class="right_box" id ="rbox2">
    <div class= "info">
        
        <p> This project focus on using leaflet to display different energy source  cultivated by  plants on varies of location (Longtitude and Latitude) across US.  </p> 
        <p class="pp1">TASK1 <p>    
          <p>For task 1, we  have checkboxes of different 10 energy, so user can filter which energy looking for, and plants in Illinois  with at least a match of any energy selected gonna display. Color of individual plant being determined by what energy matched. However, things got tricky when a plant match more than 1 kind of energy.  </p>    
          <div class="im1">
            <img src=image2/pic1.1.png class="i2" > 
            <img src = image2/pic1.2.png class= "i2"> 
          </div>
          <p>Let say you pick Coal, Hydro, Oil. Plants can match all, or match Coal,Oil or Hydro,Oil or Coal,Hydro. In this case, the color numeric range from  light pink, pink, violet, purple,orchid (Or simply see pink, purple). And even color might look a bit same, but the fact that each combination is distributed uniquely on that numeric color range. Therefore, it would be easier to distinguish by less different matched energy because each can represent a distinct color. However, when match like >5, some color gonna push within the range ( let say 2 more between purple and violet), so hard to see, but at lease we can recognize which are mixed.  </p>
          <p>So how to be able to check checkboxes to see this effect ? If you pick All, 100% chance you see blend. Also when  check renewable and/or non renewable. Renewable and/or  at least 2 individual energy.  Non renewable and/or at least 2 individual energy.  </p>
          <p class="pp1">TASK2 <p>
          <p>For task2, similar to task1 but now let have data PLNT2010 and PLNT2000, and also allow user to pick any state to see how 9 sources independently displayed on different states. And also we make screen split map so user can make some meaningful compare. So user can pick same year dropdown, and source, but one map with Wind,Oil and other is Wind,Gas. </p>
          <div class="im1">
            <img src=image2/pic1.3.png  style="width:440px;height:290px" class="i3" > 
            <img src = image2/pic1.4.png style="width:440px;height:290px" class="i3"> 
          </div>
          <p>Also we want compare simultaneously  sources, which Botton called "same source handle". If you check it, then either check a box on either side will make checkbox of other will check/uncheck in order to match checks its peer map. So this allow user to change between year and states to see how different of  energy selected appear on Michigan with different year; or same state with different years.  And you can unable this mood by click "return to normal".  In addition, we can type of map, I think one style layer is about on highway focused, other on road/location focused, and other is on forest focused. And reset view gonna bring map to original view when we expand map and scroll to somewhere </p>
          <p class="pp1">TASK3 </p>
          <p>Task 3, we want to show entire US gonna(still have option to see individual state dropdown). So user can click “All” on state dropdown and a year, to see how All source, renewable ,non renewable, at least 1 source gonna distribute across states. So we might see some sources displayed more on same states. Or what direction of US have more Coal, Hydro, and/or Oil. </p>
          <div class="im1">
            <img src =image2/pic2.5.png style="width:440px;height:290px" class= "i3"> 
            <img src =image2/pic2.6.png style="width:440px;height:290px" class= "i3">
            
          </div>
          <div class="im1"><img src = "image2/pic2.1.png" style="width:440px;height:290px" class= "i3"> </div>
          <p>In addition, we have slider to filter individual plants based on whether its total MWh fit between range. So there are no strictly treat which  slider is >= or <=. But they can be >= or <= any moments depend on how you slide. If slide slider1 more than slide2, then slider 1 is max, slider2 is min, vice versa. </p>
          <p> At start slider1 is min and slider2 is max, so can see all plant encompassed on unique  max and min of your selection subset(a specific year, a specific state, a specific energy select combination).  Meaning if you change to another state or another year, max and/or min more likely update. Or check  some group of energy also update min/max, but less likely happen, because if you pick a source that have highest  generation, then more source not gonna change max, similar to min. </p>


      </div>
    <div class= "info2">
      <p>The original data is available from https://www.epa.gov/egrid/download-data . Download eGRID2018v2 xlsx. And choose PLNT18 tab. As well as eGRID2000 and eGRID2010. In eGRID2000_plant.xls file will want  EGRDPLNT00 </p>
      <p>Since, there are plenty of column we only concern about 14 column, so we want to paste it to excel. Then, we can remove any subtitles and keep single header and change single to words for each header. Now we can use application to convert xlsx to csv. Now we can put on RStudio, and do read.table(file = "2018_datav2.csv", sep = ",",skipNul="TRUE",header = TRUE).</p>
      <div class="im1">
        <img src=image2/pic2018.1.png style="width:470px;height:150px" class="i3" > 
        <img src = image2/pic2018.2.png class= "i2"> 
      </div>
      <p>On process, PLNT 2018 has plenty of rows that has all column  ""  indicate no contribute on any source, so we want subset any column like  subset(lote1, Coal!=""). Also use gsub and as.numeric(as.character) to convert to int. To be efficient, instead of do gsub and as.numeric for every column. I melt data first, then gsub, then convert, then change negative numeric to 0. Emerge  Other1 and Other2 by ifelse(lote12$Other1==0,lote12$Other2,lote12$Other1). And dcast to go back unmelt data frame </p>
      <div class="im1">
        <img src=image2/pic2010.1.png style="width:470px;height:150px" class="i3" > 
        <img src = image2/pic2010.2.png style="width:400px;height:90px" class= "i2"> 
      </div>
      <p>On process, PLNT 2020, seem like Long and Lat has N/A, and take those row out, do similar process like PLNT2018 </p>
      <div class="im1">
        <img src=image2/pic2000.1.png style="width:470px;height:150px" class="i3" > 
      </div>
      <p>On process, EGRDPLNT00, a bit tricker, where Long and Lat and 10 source, at least 1 could be "N/A" in string. So I have no choice but subset each 12 column by |. And when I melt and convert to numeric(kWhm corespond to each energy variable) and unmelt. I just figure dcast give error such there are duplicate in energy variable with different value. so I have to do group_by with sum to condense to unique identifier. Lastly remember to Long*-1  </p>
      <div class="im1">
        <img src=image2/pic3.1.png  class="i2" > 
        <img src = image2/pic3.2.png  style="width:300px;height:240px"class= "i3"> 
      </div>
      <p>Also just brief description  how to add additional column so leaflet not have to check how many match, what matched in checkbox selection. </p>
      <p>After I subset state  lote13il - subset(lote13,State=="IL”). Me provide function a. to pass dataframe and matched list. For each row just traverse to 10 diff source, check which are matched on selection( again at least one match is enough for leaflet to render that plant on map, and match> 1 will be treat as mixed match =0, will be ignored) and similar with group_select(e, matched), where I concat a string by sep = "," , will show different combination of mix on by legend on top right. </p>
    </div>
    <div class= "info3">
      <div class="im1">  <img src=image2/alaska1.png  class="i2" >  </div> 
      <p>Alaska in 2010, also have Wind. And have more Oil, and I think it’s obvious to have Hydro as well</p>
      <div class="im1">  <img src=image2/iowa.png  class="i2" >  </div>
      <p>Iwowa have a lot plant give Oil. But at the same also have 2nd most is Wind in many location. But again it has only 3 kind of plant generate renewable. </p>
      <div class="im1">  <img src=image2/lou.png  class="i2" >  </div>
      <p>In 2010 Lousiana, only have Hydro, Biomass. On 2018 start to have plant generate Solar as well </p>
      <div class="im1">  <img src=image2/idaho1.png  class="i2" >  
       <img src=image2/idaho2.png  class="i2" > 
      </div>
      <p>Idaho seem like pro-renewable, have majority Hydro, and start 2018 also have Solar, Only have Oil,Gas as non renewable and less </p>
      <div class="im1">  
        <img src=image2/ari1.png  class="i2" >  
       <img src=image2/ari2.png  class="i2" > 
      </div>
      <p>In 2010 Arizona use a lot of Gas. But seem 2018, it become to renewable trend like Idaho, use mostly Solar. And reduce a lot  amount of Gas and Oil .  </p>
      <div class="im1">  <img src=image2/flori.png  class="i2" > 
      </div> 
      <p>Florida have a lot Mix Oil,Gas  and Coal, Oil </p>
      <div class="im1">  
        <img src=image2/cali1.png  class="i2" >  
       <img src=image2/cali2.png  class="i2" > 
      </div>
      <p>In 2010 California not sure in which trend, but have a lot of plant for Hydro, since near port.But also have a lot of plant for Gas. But in 2018, obvious start to have plant generate Solar </p>
      <div class="im1">  <img src=image2/michi.png  class="i2" >  </div>
      <p>At first glance, Michigan seem like use a lot Hydro and Biomass,Wind. But when in mix. There are plenty of plants generate mix among non-renewable energy. </p>
      </p>
      </p>
    </div>
    <div class= "info4">
      <iframe width="700" height="600" src="https://www.youtube.com/embed/AvZ7pqgm2mA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

        
  </div>
   
   </div>

   
  </div>
  <script src="mywebj.js"></script>
</html>